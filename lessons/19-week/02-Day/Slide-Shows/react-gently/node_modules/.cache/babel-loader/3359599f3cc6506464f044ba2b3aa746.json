{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = undefined;\n\nvar _jsx2 = require('babel-runtime/helpers/jsx');\n\nvar _jsx3 = _interopRequireDefault(_jsx2);\n\nvar _classCallCheck2 = require('babel-runtime/helpers/classCallCheck');\n\nvar _classCallCheck3 = _interopRequireDefault(_classCallCheck2);\n\nvar _possibleConstructorReturn2 = require('babel-runtime/helpers/possibleConstructorReturn');\n\nvar _possibleConstructorReturn3 = _interopRequireDefault(_possibleConstructorReturn2);\n\nvar _inherits2 = require('babel-runtime/helpers/inherits');\n\nvar _inherits3 = _interopRequireDefault(_inherits2);\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _createHashHistory = require('history/createHashHistory');\n\nvar _createHashHistory2 = _interopRequireDefault(_createHashHistory);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _actions = require('../actions');\n\nvar _slides = require('./slides');\n\nvar _default = require('../themes/default');\n\nvar _default2 = _interopRequireDefault(_default);\n\nvar _context = require('./context');\n\nvar _context2 = _interopRequireDefault(_context);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar history = (0, _createHashHistory2.default)();\n\nvar Controller = function (_Component) {\n  (0, _inherits3.default)(Controller, _Component);\n\n  function Controller(props) {\n    (0, _classCallCheck3.default)(this, Controller);\n\n    var _this = (0, _possibleConstructorReturn3.default)(this, _Component.call(this, props));\n\n    _this.state = {\n      print: false\n    };\n    _this.history = props.history || history;\n    return _this;\n  }\n\n  Controller.prototype.componentDidMount = function componentDidMount() {\n    this.unlisten = this.history.listen(this._updateRoute.bind(this));\n    var location = this.history.location;\n    var slideCount = (0, _slides.countSlides)(this.props.children.props.children);\n    this.props.store.dispatch((0, _actions.updateRoute)({\n      location: location,\n      slideCount: slideCount\n    }));\n  };\n\n  Controller.prototype.shouldComponentUpdate = function shouldComponentUpdate(nextProps, nextState) {\n    return this.props !== nextProps || this.state !== nextState;\n  };\n\n  Controller.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.unlisten();\n  };\n\n  Controller.prototype._updateRoute = function _updateRoute(location) {\n    var _this2 = this;\n\n    this.setState({\n      print: location.search.indexOf('print') !== -1\n    }, function () {\n      var slideCount = (0, _slides.countSlides)(_this2.props.children.props.children);\n\n      _this2.props.store.dispatch((0, _actions.updateRoute)({\n        location: location,\n        slideCount: slideCount\n      }));\n    });\n  };\n\n  Controller.prototype.render = function render() {\n    var styles = this.props.theme ? this.props.theme : (0, _default2.default)();\n    return (0, _jsx3.default)(_context2.default, {\n      store: this.props.store,\n      history: history,\n      styles: this.state.print ? styles.print : styles.screen\n    }, void 0, this.props.children);\n  };\n\n  return Controller;\n}(_react.Component);\n\nexports.default = Controller;","map":null,"metadata":{},"sourceType":"script"}