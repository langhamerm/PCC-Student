{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _isFunction2 = require(\"lodash/isFunction\");\n\nvar _isFunction3 = _interopRequireDefault(_isFunction2);\n\nvar _includes2 = require(\"lodash/includes\");\n\nvar _includes3 = _interopRequireDefault(_includes2);\n\nvar _helpers = require(\"./helpers\");\n\nvar _helpers2 = _interopRequireDefault(_helpers);\n\nvar _collection = require(\"./collection\");\n\nvar _collection2 = _interopRequireDefault(_collection);\n\nvar _d3Scale = require(\"d3-scale\");\n\nvar d3Scale = _interopRequireWildcard(_d3Scale);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nvar supportedScaleStrings = [\"linear\", \"time\", \"log\", \"sqrt\"];\nexports.default = {\n  getDefaultScale: function getDefaultScale() {\n    return d3Scale.scaleLinear();\n  },\n  toNewName: function toNewName(scale) {\n    var capitalize = function capitalize(s) {\n      return s && s[0].toUpperCase() + s.slice(1);\n    };\n\n    return \"scale\" + capitalize(scale);\n  },\n  validScale: function validScale(scale) {\n    if (typeof scale === \"function\") {\n      return (0, _isFunction3.default)(scale.copy) && (0, _isFunction3.default)(scale.domain) && (0, _isFunction3.default)(scale.range);\n    } else if (typeof scale === \"string\") {\n      return (0, _includes3.default)(supportedScaleStrings, scale);\n    }\n\n    return false;\n  },\n  isScaleDefined: function isScaleDefined(props, axis) {\n    if (!props.scale) {\n      return false;\n    } else if (props.scale.x || props.scale.y) {\n      return props.scale[axis] ? true : false;\n    }\n\n    return true;\n  },\n  getScaleTypeFromProps: function getScaleTypeFromProps(props, axis) {\n    if (!this.isScaleDefined(props, axis)) {\n      return undefined;\n    }\n\n    var scale = props.scale[axis] || props.scale;\n    return typeof scale === \"string\" ? scale : this.getType(scale);\n  },\n  getScaleFromProps: function getScaleFromProps(props, axis) {\n    if (!this.isScaleDefined(props, axis)) {\n      return undefined;\n    }\n\n    var scale = props.scale[axis] || props.scale;\n\n    if (this.validScale(scale)) {\n      return (0, _isFunction3.default)(scale) ? scale : d3Scale[this.toNewName(scale)]();\n    }\n\n    return undefined;\n  },\n  getScaleTypeFromData: function getScaleTypeFromData(props, axis) {\n    if (!props.data) {\n      return \"linear\";\n    }\n\n    var accessor = _helpers2.default.createAccessor(props[axis]);\n\n    var axisData = props.data.map(accessor);\n    return _collection2.default.containsDates(axisData) ? \"time\" : \"linear\";\n  },\n  getBaseScale: function getBaseScale(props, axis) {\n    var scale = this.getScaleFromProps(props, axis);\n\n    if (scale) {\n      return scale;\n    }\n\n    var dataScale = this.getScaleTypeFromData(props, axis);\n    return d3Scale[this.toNewName(dataScale)]();\n  },\n  getType: function getType(scale) {\n    var duckTypes = [{\n      name: \"log\",\n      method: \"base\"\n    }, {\n      name: \"ordinal\",\n      method: \"unknown\"\n    }, {\n      name: \"pow-sqrt\",\n      method: \"exponent\"\n    }, {\n      name: \"quantile\",\n      method: \"quantiles\"\n    }, {\n      name: \"quantize-threshold\",\n      method: \"invertExtent\"\n    }];\n    var scaleType = duckTypes.filter(function (type) {\n      return scale[type.method] !== undefined;\n    })[0];\n    return scaleType ? scaleType.name : undefined;\n  },\n  getScaleType: function getScaleType(props, axis) {\n    return this.getScaleTypeFromProps(props, axis) || this.getScaleTypeFromData(props, axis);\n  }\n};","map":null,"metadata":{},"sourceType":"script"}