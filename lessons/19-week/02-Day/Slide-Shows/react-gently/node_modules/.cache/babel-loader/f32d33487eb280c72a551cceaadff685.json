{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _assign2 = require(\"lodash/assign\");\n\nvar _assign3 = _interopRequireDefault(_assign2);\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _jsxFileName = \"src/victory-primitives/area.js\";\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require(\"prop-types\");\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _collection = require(\"../victory-util/collection\");\n\nvar _collection2 = _interopRequireDefault(_collection);\n\nvar _helpers = require(\"../victory-util/helpers\");\n\nvar _helpers2 = _interopRequireDefault(_helpers);\n\nvar _d3Shape = require(\"d3-shape\");\n\nvar d3Shape = _interopRequireWildcard(_d3Shape);\n\nvar _commonProps = require(\"./common-props\");\n\nvar _commonProps2 = _interopRequireDefault(_commonProps);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar Area = function (_React$Component) {\n  _inherits(Area, _React$Component);\n\n  function Area() {\n    _classCallCheck(this, Area);\n\n    return _possibleConstructorReturn(this, (Area.__proto__ || Object.getPrototypeOf(Area)).apply(this, arguments));\n  }\n\n  _createClass(Area, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      var _calculateAttributes = this.calculateAttributes(this.props),\n          style = _calculateAttributes.style,\n          areaPaths = _calculateAttributes.areaPaths,\n          linePaths = _calculateAttributes.linePaths;\n\n      this.style = style;\n      this.areaPaths = areaPaths;\n      this.linePaths = linePaths;\n    }\n  }, {\n    key: \"shouldComponentUpdate\",\n    value: function shouldComponentUpdate(nextProps) {\n      var _calculateAttributes2 = this.calculateAttributes(nextProps),\n          style = _calculateAttributes2.style,\n          areaPaths = _calculateAttributes2.areaPaths,\n          linePaths = _calculateAttributes2.linePaths;\n\n      var _props = this.props,\n          className = _props.className,\n          interpolation = _props.interpolation;\n\n      if (!_collection2.default.allSetsEqual([[className, nextProps.className], [interpolation, nextProps.interpolation], [linePaths, this.linePaths], [areaPaths, this.areaPaths], [style, this.style]])) {\n        this.style = style;\n        this.areaPaths = areaPaths;\n        this.linePaths = linePaths;\n        return true;\n      }\n\n      return false;\n    }\n  }, {\n    key: \"calculateAttributes\",\n    value: function calculateAttributes(props) {\n      var style = props.style,\n          data = props.data,\n          active = props.active,\n          scale = props.scale;\n      var dataSegments = this.getDataSegments(data);\n      var xScale = scale.x;\n      var yScale = scale.y;\n      var interpolation = this.toNewName(props.interpolation);\n      var areaFunction = d3Shape.area().curve(d3Shape[interpolation]).x(function (d) {\n        return xScale(d._x1 !== undefined ? d._x1 : d._x);\n      }).y1(function (d) {\n        return yScale(d._y1 !== undefined ? d._y1 : d._y);\n      }).y0(function (d) {\n        return yScale(d._y0);\n      });\n      var lineFunction = d3Shape.line().curve(d3Shape[interpolation]).x(function (d) {\n        return xScale(d._x1 !== undefined ? d._x1 : d._x);\n      }).y(function (d) {\n        return yScale(d._y1);\n      });\n      return {\n        style: _helpers2.default.evaluateStyle((0, _assign3.default)({\n          fill: \"black\"\n        }, style), data, active),\n        areaPaths: dataSegments.map(function (segment) {\n          return areaFunction(segment);\n        }),\n        linePaths: dataSegments.map(function (segment) {\n          return lineFunction(segment);\n        })\n      };\n    }\n  }, {\n    key: \"getDataSegments\",\n    value: function getDataSegments(data) {\n      return _collection2.default.splitArray(data, function (datum) {\n        var yDatum = datum.y1 !== undefined ? datum._y1 : datum._y;\n        return yDatum === null || typeof yDatum === \"undefined\";\n      }).filter(function (segment) {\n        return segment.length > 1;\n      });\n    }\n  }, {\n    key: \"toNewName\",\n    value: function toNewName(interpolation) {\n      var capitalize = function capitalize(s) {\n        return s && s[0].toUpperCase() + s.slice(1);\n      };\n\n      return \"curve\" + capitalize(interpolation);\n    }\n  }, {\n    key: \"renderArea\",\n    value: function renderArea(paths, style, events) {\n      var areaStroke = style.stroke ? \"none\" : style.fill;\n      var areaStyle = (0, _assign3.default)({}, style, {\n        stroke: areaStroke\n      });\n      var _props2 = this.props,\n          role = _props2.role,\n          shapeRendering = _props2.shapeRendering,\n          className = _props2.className;\n      return paths.map(function (path, index) {\n        return _react2.default.createElement(\"path\", _extends({\n          key: \"area-\" + index,\n          style: areaStyle,\n          shapeRendering: shapeRendering || \"auto\",\n          role: role || \"presentation\",\n          d: path,\n          className: className\n        }, events, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          }\n        }));\n      });\n    }\n  }, {\n    key: \"renderLine\",\n    value: function renderLine(paths, style, events) {\n      if (!style.stroke || style.stroke === \"none\" || style.stroke === \"transparent\") {\n        return [];\n      }\n\n      var _props3 = this.props,\n          role = _props3.role,\n          shapeRendering = _props3.shapeRendering,\n          className = _props3.className;\n      var lineStyle = (0, _assign3.default)({}, style, {\n        fill: \"none\"\n      });\n      return paths.map(function (path, index) {\n        return _react2.default.createElement(\"path\", _extends({\n          key: \"area-stroke-\" + index,\n          style: lineStyle,\n          shapeRendering: shapeRendering || \"auto\",\n          role: role || \"presentation\",\n          d: path,\n          className: className\n        }, events, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          }\n        }));\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _props4 = this.props,\n          events = _props4.events,\n          groupComponent = _props4.groupComponent;\n      var areas = this.renderArea(this.areaPaths, this.style, events);\n      var lines = this.renderLine(this.linePaths, this.style, events);\n      var children = [].concat(_toConsumableArray(lines), _toConsumableArray(areas));\n      return children.length === 1 ? children[0] : _react2.default.cloneElement(groupComponent, {}, children);\n    }\n  }]);\n\n  return Area;\n}(_react2.default.Component);\n\nArea.propTypes = _extends({}, _commonProps2.default, {\n  groupComponent: _propTypes2.default.element,\n  interpolation: _propTypes2.default.string\n});\nArea.defaultProps = {\n  groupComponent: _react2.default.createElement(\"g\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 17\n    }\n  })\n};\nexports.default = Area;","map":null,"metadata":{},"sourceType":"script"}