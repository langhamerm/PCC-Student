{"ast":null,"code":"Object.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _without2 = require(\"lodash/without\");\n\nvar _without3 = _interopRequireDefault(_without2);\n\nvar _pick2 = require(\"lodash/pick\");\n\nvar _pick3 = _interopRequireDefault(_pick2);\n\nvar _partialRight2 = require(\"lodash/partialRight\");\n\nvar _partialRight3 = _interopRequireDefault(_partialRight2);\n\nvar _isFunction2 = require(\"lodash/isFunction\");\n\nvar _isFunction3 = _interopRequireDefault(_isFunction2);\n\nvar _assign2 = require(\"lodash/assign\");\n\nvar _assign3 = _interopRequireDefault(_assign2);\n\nvar _defaults2 = require(\"lodash/defaults\");\n\nvar _defaults3 = _interopRequireDefault(_defaults2);\n\nvar _jsxFileName = \"src/victory-util/add-events.js\";\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _get = function get(object, property, receiver) {\n  if (object === null) object = Function.prototype;\n  var desc = Object.getOwnPropertyDescriptor(object, property);\n\n  if (desc === undefined) {\n    var parent = Object.getPrototypeOf(object);\n\n    if (parent === null) {\n      return undefined;\n    } else {\n      return get(parent, property, receiver);\n    }\n  } else if (\"value\" in desc) {\n    return desc.value;\n  } else {\n    var getter = desc.get;\n\n    if (getter === undefined) {\n      return undefined;\n    }\n\n    return getter.call(receiver);\n  }\n};\n\nvar _react = require(\"react\");\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _events = require(\"./events\");\n\nvar _events2 = _interopRequireDefault(_events);\n\nvar _victoryTransition = require(\"../victory-transition/victory-transition\");\n\nvar _victoryTransition2 = _interopRequireDefault(_victoryTransition);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _toConsumableArray(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nexports.default = function (WrappedComponent) {\n  return function (_WrappedComponent) {\n    _inherits(addEvents, _WrappedComponent);\n\n    function addEvents() {\n      _classCallCheck(this, addEvents);\n\n      return _possibleConstructorReturn(this, (addEvents.__proto__ || Object.getPrototypeOf(addEvents)).apply(this, arguments));\n    }\n\n    _createClass(addEvents, [{\n      key: \"componentWillMount\",\n      value: function componentWillMount() {\n        if ((0, _isFunction3.default)(_get(addEvents.prototype.__proto__ || Object.getPrototypeOf(addEvents.prototype), \"componentWillMount\", this))) {\n          _get(addEvents.prototype.__proto__ || Object.getPrototypeOf(addEvents.prototype), \"componentWillMount\", this).call(this);\n        }\n\n        this.state = this.state || {};\n\n        var getScopedEvents = _events2.default.getScopedEvents.bind(this);\n\n        this.getEvents = (0, _partialRight3.default)(_events2.default.getEvents.bind(this), getScopedEvents);\n        this.getEventState = _events2.default.getEventState.bind(this);\n        this.setupEvents(this.props);\n      }\n    }, {\n      key: \"componentWillUpdate\",\n      value: function componentWillUpdate(newProps) {\n        if ((0, _isFunction3.default)(_get(addEvents.prototype.__proto__ || Object.getPrototypeOf(addEvents.prototype), \"componentWillReceiveProps\", this))) {\n          _get(addEvents.prototype.__proto__ || Object.getPrototypeOf(addEvents.prototype), \"componentWillReceiveProps\", this).call(this);\n        }\n\n        this.setupEvents(newProps);\n      }\n    }, {\n      key: \"setupEvents\",\n      value: function setupEvents(props) {\n        var sharedEvents = props.sharedEvents;\n        var components = WrappedComponent.expectedComponents;\n        this.componentEvents = _events2.default.getComponentEvents(props, components);\n        this.getSharedEventState = sharedEvents && (0, _isFunction3.default)(sharedEvents.getEventState) ? sharedEvents.getEventState : function () {\n          return undefined;\n        };\n        this.baseProps = this.getBaseProps(props);\n        this.dataKeys = Object.keys(this.baseProps).filter(function (key) {\n          return key !== \"parent\";\n        });\n        this.hasEvents = props.events || props.sharedEvents || this.componentEvents;\n        this.events = this.getAllEvents(props);\n      }\n    }, {\n      key: \"getBaseProps\",\n      value: function getBaseProps(props) {\n        var sharedParentState = this.getSharedEventState(\"parent\", \"parent\");\n        var parentState = this.getEventState(\"parent\", \"parent\");\n        var baseParentProps = (0, _defaults3.default)({}, parentState, sharedParentState);\n        var parentPropsList = baseParentProps.parentControlledProps;\n        var parentProps = parentPropsList ? (0, _pick3.default)(baseParentProps, parentPropsList) : {};\n        var modifiedProps = (0, _defaults3.default)({}, parentProps, props);\n        return (0, _isFunction3.default)(WrappedComponent.getBaseProps) ? WrappedComponent.getBaseProps(modifiedProps) : {};\n      }\n    }, {\n      key: \"getAllEvents\",\n      value: function getAllEvents(props) {\n        if (Array.isArray(this.componentEvents)) {\n          var _componentEvents;\n\n          return Array.isArray(props.events) ? (_componentEvents = this.componentEvents).concat.apply(_componentEvents, _toConsumableArray(props.events)) : this.componentEvents;\n        }\n\n        return props.events;\n      }\n    }, {\n      key: \"getComponentProps\",\n      value: function getComponentProps(component, type, index) {\n        var role = WrappedComponent.role;\n        var key = this.dataKeys && this.dataKeys[index] || index;\n        var baseProps = this.baseProps[key][type] || this.baseProps[key];\n\n        if (!baseProps && !this.hasEvents) {\n          return undefined;\n        }\n\n        if (this.hasEvents) {\n          var baseEvents = this.getEvents(this.props, type, key);\n          var componentProps = (0, _defaults3.default)({\n            index: index,\n            key: role + \"-\" + type + \"-\" + key\n          }, this.getEventState(key, type), this.getSharedEventState(key, type), component.props, baseProps);\n          var events = (0, _defaults3.default)({}, _events2.default.getPartialEvents(baseEvents, key, componentProps), componentProps.events);\n          return (0, _assign3.default)({}, componentProps, {\n            events: events\n          });\n        }\n\n        return (0, _defaults3.default)({\n          index: index,\n          key: role + \"-\" + type + \"-\" + key\n        }, component.props, baseProps);\n      }\n    }, {\n      key: \"renderContainer\",\n      value: function renderContainer(component, children) {\n        var isContainer = component.type && component.type.role === \"container\";\n        var parentProps = isContainer ? this.getComponentProps(component, \"parent\", \"parent\") : {};\n        return _react2.default.cloneElement(component, parentProps, children);\n      }\n    }, {\n      key: \"animateComponent\",\n      value: function animateComponent(props, animationWhitelist) {\n        return _react2.default.createElement(_victoryTransition2.default, {\n          animate: props.animate,\n          animationWhitelist: animationWhitelist,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          }\n        }, _react2.default.createElement(this.constructor, props));\n      }\n    }, {\n      key: \"renderContinuousData\",\n      value: function renderContinuousData(props) {\n        var _this2 = this;\n\n        var dataComponent = props.dataComponent,\n            labelComponent = props.labelComponent,\n            groupComponent = props.groupComponent;\n        var dataKeys = (0, _without3.default)(this.dataKeys, \"all\");\n        var labelComponents = dataKeys.reduce(function (memo, key) {\n          var labelProps = _this2.getComponentProps(labelComponent, \"labels\", key);\n\n          if (labelProps && labelProps.text !== undefined && labelProps.text !== null) {\n            memo = memo.concat(_react2.default.cloneElement(labelComponent, labelProps));\n          }\n\n          return memo;\n        }, []);\n        var dataProps = this.getComponentProps(dataComponent, \"data\", \"all\");\n        var children = [_react2.default.cloneElement(dataComponent, dataProps)].concat(_toConsumableArray(labelComponents));\n        return this.renderContainer(groupComponent, children);\n      }\n    }, {\n      key: \"renderData\",\n      value: function renderData(props) {\n        var _this3 = this;\n\n        var dataComponent = props.dataComponent,\n            labelComponent = props.labelComponent,\n            groupComponent = props.groupComponent;\n        var dataComponents = this.dataKeys.map(function (_dataKey, index) {\n          var dataProps = _this3.getComponentProps(dataComponent, \"data\", index);\n\n          return _react2.default.cloneElement(dataComponent, dataProps);\n        });\n        var labelComponents = this.dataKeys.map(function (_dataKey, index) {\n          var labelProps = _this3.getComponentProps(labelComponent, \"labels\", index);\n\n          if (labelProps.text !== undefined && labelProps.text !== null) {\n            return _react2.default.cloneElement(labelComponent, labelProps);\n          }\n\n          return undefined;\n        }).filter(Boolean);\n        var children = [].concat(_toConsumableArray(dataComponents), _toConsumableArray(labelComponents));\n        return this.renderContainer(groupComponent, children);\n      }\n    }]);\n\n    return addEvents;\n  }(WrappedComponent);\n};","map":null,"metadata":{},"sourceType":"script"}